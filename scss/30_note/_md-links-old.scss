/*──────────Internal & External Links──────────*/
/* Source View Resolved Links */
span.cm {
    &-url.cm-url,
    &-blockid,
    &-link:not(.cm-formatting),
    &-underline:not(span[data-link-tags] .cm-underline),
    &-inline-code.cm-link:not(.cm-formatting-code.cm-formatting),
    &-hmd-footnote,
    &-header.cm-hmd-internal-link {
        color: var(--md-color-reslink);
        text-decoration: underline;
        text-underline-position: under;
        text-decoration-thickness: 1px;

        transition: var(--duration-superfast)
                    var(--motion-smooth);

        &:hover {
            color: var(--md-color-reslink-hover);
            text-decoration: underline;
            text-underline-position: under;
            text-decoration-thickness: 1px;
        }

        &:active {
            color: var(--md-color-reslink-active);
            text-decoration: underline;
            text-underline-position: under;
            text-decoration-thickness: 1px;
        }

        .no-link-underline & { // Style Setting — No Link Underline in Edit View
            text-decoration: none;
        }
    }
}

/* Source View Unresolved Links */
span.is-unresolved.is-unresolved {
    & span.cm {
        &-url,
        &-blockid,
        &-link,
        &-underline,
        &-hmd-footnote {
            color: var(--md-color-unreslink);
            text-decoration: underline;
            text-underline-position: under;
            text-decoration-thickness: 1px;
    
            transition: var(--duration-superfast)
                        var(--motion-smooth);

            &:hover {
                color: var(--md-color-unreslink-hover);
                text-decoration: underline;
                text-underline-position: under;
                text-decoration-thickness: 1px;
            }

            &:active {
                color: var(--md-color-unreslink-active);
                text-decoration: underline;
                text-underline-position: under;
                text-decoration-thickness: 1px;
            }
        }
    }
}

span.is-unresolved .cm-hmd-internal-link {
    color: var(--md-color-unreslink);
    
    &:hover {
        text-decoration: none;
    }
}

/* Legacy Editor Fix */
.markdown-source-view:not(.mod-cm6) .cm-hmd-internal-link {
    color: var(--md-color-unreslink);
    transition: var(--duration-superfast)
                    var(--motion-smooth);

    &:hover {
        color: var(--md-color-reslink-hover);
        cursor: pointer;
    }
    
    &:active {
        color: var(--md-color-reslink-active);
    }

    .no-link-underline & { // Style Setting — No Link Underline in Legacy Editor
        text-decoration: none;
    }
}

/* Preview Resolved Links */
a:not(a.footnote-link, a.tag, button.mod-cta a, a.is-unresolved),
a code {
    .modal &,
    .view-content & {
        color: var(--md-color-reslink);
        text-decoration: underline;
        text-underline-position: under;
        text-decoration-thickness: 1px;

        
        transition: var(--duration-superfast)
                    var(--motion-smooth);
        
        &:hover {
            color: var(--md-color-reslink-hover);
            cursor: pointer;
        }
        
        &:active {
            color: var(--md-color-reslink-active);
        }

        .no-link-underline & { // Style Setting — No Link Underline in Modals
            text-decoration: none;
        }
    }
}    

.internal-link,
.external-link {
    color: var(--md-color-reslink);
    text-decoration: underline;
    text-underline-position: under;
    text-decoration-thickness: 1px;

    
    transition: var(--duration-superfast)
    var(--motion-smooth);
    
    &:hover {
        color: var(--md-color-reslink-hover);
        cursor: pointer;
    }
    
    &:active {
        color: var(--md-color-reslink-active);
    }

    &.is-unresolved {
        color: var(--md-color-unreslink);
        text-underline-position: under;

        transition: var(--duration-superfast)
                    var(--motion-smooth);

        &:hover {
            color: var(--md-color-unreslink-hover);
            cursor: pointer;
        }

        &:active {
            color: var(--md-color-unreslink-active);
        }
    }

    .no-link-underline & { // Style Setting — No Link Underline in Preview View
        text-decoration: none;
    }
}

a {
    .markdown-preview-view & {
        &.footnote-link {
            color: var(--md-color-reslink);
            text-underline-position: under;
        }
    }

    .no-link-underline & { // Style Setting — No Link Underline in Global
        text-decoration: none;
    }
}

/* Opacity of Unresolved Links Fix */
.markdown-source-view.mod-cm6 .is-unresolved,
.markdown-preview-view .internal-link.is-unresolved {
    opacity: 1;
}

/* External Link Icon Position Fix */
.external-link {
    background-position-y: initial;
}

/* No Underline Fixes */
.no-link-underline {
    & .cm-s-obsidian span.cm-hmd-internal-link:hover {
        text-decoration: none;
    }

    & span.is-unresolved.is-unresolved span.cm-url:hover, span.is-unresolved.is-unresolved span.cm-blockid:hover, span.is-unresolved.is-unresolved span.cm-link:hover, span.is-unresolved.is-unresolved span.cm-underline:hover, span.is-unresolved.is-unresolved span.cm-hmd-footnote:hover {
        text-decoration: none;
    }
}